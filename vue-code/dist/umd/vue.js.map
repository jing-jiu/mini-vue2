{"version":3,"file":"vue.js","sources":["../../src/util.js","../../src/global-api/index.js","../../src/compiler/generate.js","../../src/compiler/parse.js","../../src/compiler/index.js","../../src/observer/dep.js","../../src/observer/watcher.js","../../src/vdom/patch.js","../../src/lifecycle.js","../../src/observer/array.js","../../src/observer/index.js","../../src/state.js","../../src/init.js","../../src/vdom/index.js","../../src/index.js"],"sourcesContent":["export function proxy(vm, data, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[data][key]\r\n        },\r\n        set(newValue) {\r\n            vm[data][key] = newValue\r\n        }\r\n    })\r\n}\r\nexport function def(obj, key, val, enumerable) {\r\n    Object.defineProperty(obj, key, {\r\n        value: val,\r\n        enumerable: !!enumerable,\r\n        writable: true,\r\n        configurable: true\r\n    })\r\n}\r\nexport const LIFECYCLE_HOOKS = [\r\n    'beforeCreate',\r\n    'created',\r\n    'beforeMount',\r\n    'mounted', -\r\n    'beforeUpdate',\r\n    'updated',\r\n    'beforeDestroy',\r\n    'destroyed',\r\n    'activated',\r\n    'deactivated',\r\n    'errorCaptured'\r\n]\r\nconst strats = {}\r\nstrats.data = function (parentValue, childValue) {\r\n    return childValue\r\n}\r\nstrats.computed = function () {\r\n\r\n}\r\nstrats.watch = function (parentValue, childValue) {\r\n    return childValue\r\n}\r\n// 生命周期合并\r\nfunction mergeHook(parentValue, childValue) {\r\n    if (childValue) {\r\n        if (parentValue) {\r\n            // 父子都有 合并\r\n            return parentValue.concat(childValue)\r\n        } else {\r\n            // 只有子\r\n            return [childValue]\r\n        }\r\n    } else {\r\n        // 子无 用父\r\n        return parentValue\r\n    }\r\n}\r\nLIFECYCLE_HOOKS.forEach(hook => {\r\n    strats[hook] = mergeHook\r\n});\r\nexport function mergeOptions(parent, child) {\r\n    function mergeField(key) {\r\n        if (strats[key]) {\r\n            // 有就合并\r\n            return options[key] = strats[key](parent[key], child[key])\r\n        } else {\r\n            return options[key] = child[key]\r\n        }\r\n        // return strats[key](parent[key],child[key])\r\n    }\r\n    const options = {}\r\n    for (const key in parent) {\r\n        // 父子都有\r\n        options[key] = mergeField(key);\r\n    }\r\n    for (const key in child) {\r\n        // 子有 父无  将子多余的合并到父上\r\n        if (!parent.hasOwnProperty(key)) {\r\n            options[key] = mergeField(key);\r\n        }\r\n    }\r\n    return options\r\n}\r\nconst callbacks = []\r\nlet pending = false\r\nfunction flushCallbacks() {\r\n    while (callbacks.length) {\r\n        let cb = callbacks.shift()\r\n        cb()\r\n    }\r\n    pending = false  // 已经执行完毕\r\n}\r\nlet timerFunc;\r\nif (Promise) {\r\n    timerFunc = () => {\r\n        Promise.resolve().then(flushCallbacks)\r\n    }\r\n} else if (MutationObserver) {\r\n    // 可以监控dom的变化 监控完毕后异步更新\r\n    let observe = new MutationObserver(flushCallbacks)\r\n    let textNode = document.createTextNode(1)\r\n    observe.observe(textNode, { characterData: true })\r\n    timerFunc = () => {\r\n        textNode.textContent = 2\r\n    }\r\n} else if (setImmediate) {\r\n    timerFunc = () => {\r\n        setImmediate(flushCallbacks)\r\n    }\r\n} else {\r\n    timerFunc = () => {\r\n        setTimeout(flushCallbacks)\r\n    }\r\n}\r\n// 异步只需要一次  所以也需要判定\r\nexport function nextTick(cb) {\r\n    callbacks.push(cb)\r\n    if (!pending) {\r\n        timerFunc()\r\n        pending = true\r\n    }\r\n}","import { mergeOptions } from \"../util\";\r\n\r\nexport function initGlobalApi(Vue) {\r\n    Vue.options = {};\r\n    Vue.mixin = function (mixin) {\r\n        // 选项合并\r\n        this.options = mergeOptions(this.options,mixin)\r\n    }\r\n} ","/*render(h) {\r\n    return _c('div',{id:'app',style:{color:'red'}},_v('hello'+_s(name)),_c('h1',null,_v('{{msg}}')))\r\n},*/\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\n\r\nfunction genProps(attrs) {\r\n    // 属性处理\r\n    let str = ''\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        const attr = attrs[i];\r\n        if (attr.name === 'style') {\r\n            let obj = {}\r\n            attr.value.split(';').forEach((item) => {\r\n                let [key, value] = item.trim().split(\":\")\r\n                obj[key] = value\r\n            })\r\n            attr.value = obj\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n    }\r\n    return `{${str.slice(0, -1)}}`\r\n}\r\nfunction gen(node) {\r\n    // 文本 or 标签\r\n    if (node.type == 1) {\r\n        // 标签节点  递归调用generate\r\n        return generate(node)\r\n    } else {\r\n        let text = node.text\r\n        // 普通文本 or 模板语法\r\n        if(!defaultTagRE.test(text)){\r\n            return `_v(${JSON.stringify(text)})`\r\n        }\r\n        let tokens = [] // 存放模板代码\r\n        let match,index;\r\n        let lastIndex = defaultTagRE.lastIndex = 0; // 全局模式 每次将lastIndex置0 要不然会出问题\r\n        while (match = defaultTagRE.exec(text)) {\r\n            index = match.index  // 保存匹配到的索引\r\n            // 说明模板语法前面还有普通的字符串  先把普通的字符串push进tokens数组\r\n            if(index > lastIndex){\r\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)))\r\n            }\r\n            // 之后把模板语法的字符串加上_s() push进去\r\n            tokens.push(`_s(${match[1].trim()})`)\r\n            // 最后更新lastIndex的位置\r\n            lastIndex = index + match[0].length \r\n        }\r\n        // 匹配完模板语法 如果还有没匹配到的说明是普通字符串\r\n        if(lastIndex < text.length){\r\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n        }\r\n        return `_v(${tokens.join('+')})`;\r\n    }\r\n}\r\nfunction genChildren(ast) {\r\n    const children = ast.children\r\n    if (children) {\r\n        return children.map(child => gen(child)).join(',')\r\n    }\r\n}\r\nexport function generate(ast) {\r\n    let children = genChildren(ast)\r\n    let code = `_c('${ast.tag}',${\r\n        ast.attrs.length ? `${genProps(ast.attrs)}` : 'undefined'\r\n    }${\r\n        children ? `,${children}` : ''\r\n    })`;\r\n    return code\r\n}","const ncname = '[a-zA-Z_][\\\\w\\\\-\\\\.]*'\r\n// 匹配标签名 <a-b> </a-b>\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\n// ?:匹配但不捕获 <my:xxx> </my:xxx>\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst startTagClose = /^\\s*(\\/?)>/\r\n\r\nexport function parseHTML(html) {\r\n    function createASTElement(tagName, attrs) {\r\n        return {\r\n            tag: tagName,\r\n            type: 1,\r\n            children: [],\r\n            attrs,\r\n            parent: null\r\n        }\r\n    }\r\n    function start(tagName, attrs) {\r\n        let element = createASTElement(tagName, attrs)\r\n        if (!root) {\r\n            root = element\r\n        }\r\n        currentParent = element\r\n        stack.push(element)\r\n        // console.log(tagName, attrs, '— — — — — — — — — 开始标签 — — — — — — — — —');\r\n    }\r\n    function end(tagName) {\r\n        // 标签闭合的时候  确定谁是谁的爹 谁是谁的儿\r\n        let element = stack.pop()\r\n        currentParent = stack[stack.length - 1]\r\n        if (currentParent) {\r\n            element.parent = currentParent\r\n            currentParent.children.push(element)\r\n        }\r\n        // console.log(tagName, '— — — — — — — — — 结束标签 — — — — — — — — —');\r\n    }\r\n    function chars(text) {\r\n        text = text.trim();\r\n        if (text) {\r\n            currentParent.children.push({\r\n                type: 3,\r\n                text\r\n            })\r\n        }\r\n        // console.log(text, '— — — — — 文本标签 — — — — —');\r\n    }\r\n    function parseStartTag() {\r\n        // 匹配开头\r\n        let start = html.match(startTagOpen)\r\n        if (start) {\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            advance(start[0].length) // 删除开始标签\r\n            let end, attr;\r\n            // 不是结尾标签  且能匹配到属性\r\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] })\r\n                advance(attr[0].length)\r\n            }\r\n            if (end) {\r\n                advance(end[0].length)\r\n                return match\r\n            }\r\n        }\r\n    }\r\n    function advance(n) {\r\n        // 将解析的字符串删掉  更新字符串\r\n        html = html.substring(n)\r\n    }\r\n    // <div id=\"app\">\r\n    //     <h1>{{msg}}</h1>\r\n    // </div>\r\n\r\n    // ast语法树\r\n\r\n    // {\r\n    //     tag:'div',\r\n    //     attrs:[{id:'app'}],\r\n    //     parent:null,\r\n    //     type:1,\r\n    //     children:[\r\n    //         {\r\n    //             attrs:[],\r\n    //             tag:'h1',\r\n    //             children:[],\r\n    //             text:{{msg}},\r\n    //             parent:父div\r\n    //         }\r\n    //     ]\r\n    // }  \r\n    let root, currentParent, stack = [];\r\n    while (html) {\r\n        //只要html不为空就一直解析   \r\n        let textEnd = html.indexOf('<')\r\n        // 肯定是标签  有可能是开始  也有可能是结束\r\n        if (textEnd == 0) {\r\n            let startTagMatch = parseStartTag(); // 开始标签匹配的结果\r\n            if (startTagMatch) {\r\n                start(startTagMatch.tagName, startTagMatch.attrs)\r\n                continue\r\n            }\r\n\r\n            let endTagMatch = html.match(endTag)\r\n            if (endTagMatch) {\r\n                advance(endTagMatch[0].length)\r\n                end(endTagMatch[1])\r\n                continue\r\n            }\r\n        }\r\n        let text;\r\n        if (textEnd > 0) {\r\n            // 文本节点  因为textEnd > 0 此时的textEnd的位置应该是结束标签的位置   因此截取从0到结束标签前  都是文本节点\r\n            text = html.substring(0, textEnd)\r\n            if (text) {\r\n                advance(text.length)\r\n                chars(text);\r\n                continue\r\n            }\r\n        }\r\n    }\r\n    return root\r\n}","import { generate } from \"./generate\";\r\nimport { parseHTML } from \"./parse\";\r\n\r\n\r\nexport function compileToFunctions(template) {\r\n    let ast = parseHTML(template) // 解析HTML成ast语法树\r\n    \r\n    //优化静态节点 \r\n    let code = generate(ast)// 通过ast树 重新生成html代码\r\n    \r\n    // 用with取this身上的值\r\n    let render = new Function(`with(this){return ${code}}`)// 将字符串变成可执行的函数\r\n    \r\n    return render\r\n}","let id = 0;\r\n\r\nclass Dep {\r\n    constructor(){\r\n        this.subs = []\r\n        this.id = id++\r\n    }\r\n    depend(){\r\n        // watcher也要存dep 然后在watcher中调addDep在dep存watcher\r\n        Dep.target.addDep(this)\r\n    }\r\n    notify(){\r\n        this.subs.forEach((watcher)=>{\r\n            watcher.update()\r\n        })\r\n    }\r\n    addSub(watcher){\r\n        // watcher是渲染使用的  因此可以有多个 猜想在这里要使用nextTick 只渲染最新的watcher\r\n        this.subs.push(watcher)\r\n    }\r\n}\r\nDep.target = null\r\nexport function pushTarget(watcher) {\r\n    Dep.target = watcher // 使当前的watcher成为活跃的watcher\r\n}\r\n\r\nexport function popTarget(watcher) {\r\n    Dep.target = null\r\n}\r\n// 一个属性就有一个dep 用来收集watcher\r\nexport default Dep","import { callHook } from \"../lifecycle\";\r\nimport { nextTick } from \"../util\";\r\nimport { popTarget, pushTarget } from \"./dep\";\r\n\r\nlet id = 0;\r\nlet queue = [] // 将批量更新的watcher存入一个队列 异步渲染\r\nlet has = {} // 对watcher去重\r\nlet pending = false // 定时器状态\r\nclass Watcher {\r\n    // vm实例\r\n    // exprOrFn vm._update(vm._render)\r\n    // cb 钩子函数\r\n    // 是否为渲染watcher\r\n    constructor(vm, exprOrFn, cb, options = {}) {\r\n        this.vm = vm\r\n        this.exprOrFn = exprOrFn\r\n        this.cb = cb\r\n        this.options = options\r\n        this.isWatcher = !!options\r\n        this.deps = [] // watcher记录当时个dep依赖自己\r\n        this.depsId = new Set()\r\n        this.id = id++  // 唯一标识\r\n\r\n        if (typeof exprOrFn === 'function') {\r\n            this.getter = exprOrFn\r\n        }\r\n        this.get() // 默认调用getter\r\n    }\r\n    get() {\r\n        pushTarget(this) // 将watcher实例传入 声明当前正在渲染的watcher\r\n        this.getter() // 调用exprOrFn 渲染页面\r\n        popTarget(this) //同上\r\n    }\r\n    update() {\r\n        // 异步渲染\r\n        queueWatcher(this)\r\n        // this.get()\r\n    }\r\n    addDep(dep) {\r\n        let id = dep.id\r\n        // 保证相同的dep只存一次\r\n        if (!this.depsId.has(id)) {\r\n            this.deps.push(dep)\r\n            this.depsId.add(id)\r\n            dep.addSub(this)\r\n        }\r\n    }\r\n    run() {\r\n        this.get() // 异步渲染逻辑\r\n    }\r\n}\r\nfunction flushSchedulerQueue() {\r\n    queue.forEach(watcher => {\r\n        watcher.run()\r\n        callHook(watcher.vm,'updated')\r\n    })\r\n    queue = []\r\n    has = {}\r\n    pending = false\r\n}\r\nfunction queueWatcher(watcher) {\r\n    const id = watcher.id\r\n    if (has[id] == null) { // 对watcher去重\r\n        queue.push(watcher)\r\n        watcher.cb()\r\n        has[id] = true\r\n        // 放入异步队列\r\n        if (!pending) {// 如果还没清空定时器  就不会开启定时器\r\n            nextTick(flushSchedulerQueue)\r\n            pending = true\r\n        }\r\n    }\r\n}\r\n\r\nexport default Watcher","export function patch(oldVnode, newVnode) {\r\n    let el = createElm(newVnode) // 产生真实dom\r\n    let parentElm = oldVnode.parentNode //获取oldVnode的父元素\r\n    parentElm.insertBefore(el, oldVnode.nextSibling);//当前的真实dom插到老元素下一个的前面\r\n    parentElm.removeChild(oldVnode) // 删除老节点\r\n    return el\r\n}\r\n\r\nfunction createElm(vnode) {\r\n    let { tag, children, key, data, text } = vnode\r\n    if (typeof tag === 'string') {\r\n        // 创建元素  放到vnode.el上\r\n        vnode.el = document.createElement(tag)\r\n        // 更新属性 \r\n        updateProperties(vnode)\r\n        // 遍历子节点  递归调用createElm生成真实dom\r\n        children.forEach(child => {\r\n            vnode.el.appendChild(createElm(child))\r\n        });\r\n    } else {\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el\r\n}\r\nfunction updateProperties(vnode) {\r\n    let el = vnode.el\r\n    let newProps = vnode.data || {}\r\n    for (const key in newProps) {\r\n        if (key == 'style') {\r\n            for (let styleName in newProps.style) {\r\n                el.style[styleName] = newProps.style[styleName]\r\n            }\r\n        } else if (key == 'class') {\r\n            el.className = newProps.class\r\n        } else {\r\n            el.setAttribute(key, newProps[key])\r\n        }\r\n    }\r\n}","import Watcher from \"./observer/watcher\";\r\nimport { patch } from \"./vdom/patch\";\r\n\r\nexport function lifecycleMixin(Vue) {\r\n    Vue.prototype._update = function (vnode) {\r\n        const vm = this\r\n\r\n        // 更新$el\r\n        vm.$el = patch(vm.$el,vnode)\r\n    }\r\n}\r\n\r\n\r\nexport function mountComponent(vm, el) {\r\n    callHook(vm,'beforeMount');\r\n    // 调用render方法渲染el属性\r\n    // 先调用render创建虚拟节点  再将虚拟节点渲染到页面上\r\n    let updateComponent = ()=>{\r\n        vm._update(vm._render());\r\n    };\r\n    // 渲染watcher \r\n    new Watcher(vm,updateComponent,()=>{\r\n        callHook(vm,'beforeUpdate')\r\n    },true)\r\n    // 将属性跟watcher绑定在一起  一个组件对应一个watcher\r\n    callHook(vm,'mounted');\r\n}\r\n\r\nexport function callHook(vm,hook) {\r\n    const handlers = vm.$options[hook]\r\n    if(handlers){\r\n        if(!Array.isArray(handlers)) handlers.call(vm)\r\n        else{\r\n            for (let i = 0; i < handlers.length; i++) {\r\n                handlers[i].call(vm) // 调用钩子函数  指向生命周期的this\r\n            }\r\n        }\r\n    }\r\n}","// 拿到数组原型上的方法\r\nlet arrayProto = Array.prototype;\r\n\r\n// 继承这些方法并对这些方法进行拦截\r\n\r\nexport const arrayMethods = Object.create(arrayProto);\r\n// 定义需要重写的七种方法\r\nconst methodsToPatch = [\r\n    'push',\r\n    'pop',\r\n    'shift',\r\n    'unshift',\r\n    'splice',\r\n    'sort',\r\n    'reverse'\r\n]\r\nmethodsToPatch.forEach((method)=>{\r\n    arrayMethods[method] = function (...args) {\r\n        // this Observer中的data\r\n        let res = arrayProto[method].apply(this,args)\r\n        const ob = this.__ob__\r\n        let inserted; // 要插入的数据\r\n        switch (method) {\r\n            case 'push'://arr.push({},{})\r\n            case 'unshift':\r\n                inserted = args;\r\n                break;\r\n            case 'splice': // vue.$set\r\n                inserted = args.slice(2); // arr.splice(0,1,{a:1})  0 1 2 第二个是新增对象\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        // 对新增的值进行发布订阅 派发更新\r\n        if(inserted) ob.observeArray(inserted);\r\n        // console.log('调用'+method);\r\n        ob.dep.notify()\r\n        // 返回七种方法的返回值\r\n        return res\r\n    }\r\n})","import { def } from \"../util\"\r\nimport { arrayMethods } from \"./array\"\r\nimport Dep from \"./dep\"\r\n\r\nclass Observer {\r\n    constructor(data) {\r\n        let dep = new Dep()\r\n        this.dep = dep\r\n        def(data, '__ob__', this) // 追加__ob__属性\r\n        if (Array.isArray(data)) {\r\n            // 改变原型链  使其指向arrayMethods\r\n            data.__proto__ = arrayMethods\r\n            this.observeArray(data)\r\n        } else {\r\n            this.walk(data)\r\n        }\r\n    }\r\n    walk(obj) {\r\n        const keys = Object.keys(obj)\r\n        for (let i = 0; i < keys.length; i++) {\r\n            defineReactive(obj, keys[i])\r\n        }\r\n    }\r\n    observeArray(item) {\r\n        for (let i = 0; i < item.length; i++) {\r\n            observe(item[i])\r\n        }\r\n    }\r\n}\r\nfunction defineReactive(data, key, value) {\r\n    if (arguments.length === 2) {\r\n        value = data[key]\r\n    }\r\n    let childOb = observe(value)\r\n\r\n    let dep = new Dep()\r\n\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            //访问该属性  将属性跟watcher对应 \r\n            if (Dep.target) {\r\n                // 将当前watcher存起来\r\n                // 订阅 依赖收集\r\n                dep.depend()\r\n                console.log(dep);\r\n                // 如果访问了子节点 递归订阅子节点\r\n                // console.log(dep.subs);\r\n                if (childOb) {\r\n                    // 深度订阅\r\n                    childOb.dep.depend()\r\n                    // 对数组进行依赖收集  数组只能在七种方法上进行派发更新\r\n                    if (Array.isArray(value)) {\r\n                        dependArray(value)\r\n                    }\r\n                }\r\n            }\r\n            return value\r\n        },\r\n        set(newValue) {\r\n            if (newValue == value) return\r\n            // 将值改为对象  为该对象进行监听\r\n            childOb = observe(newValue)\r\n            value = newValue\r\n            // 发布 派发更新\r\n            dep.notify()\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data) {\r\n    if (typeof data !== 'object' || data == null) {\r\n        return;\r\n    }\r\n    let ob;\r\n    if (Object.hasOwn(data, '__ob__')) {\r\n        ob = data.__ob__\r\n    } else {\r\n        ob = new Observer(data)\r\n    }\r\n    return ob\r\n}\r\nexport function dependArray(value) {\r\n    for (let e, i = 0, l = value.length; i < l; i++) {\r\n        e = value[i]\r\n        e && e.__ob__ && e.__ob__.dep.depend()\r\n        if (Array.isArray(e)) {\r\n            dependArray(e)\r\n        }\r\n    }\r\n}","import { observe } from \"./observer/index\";\r\nimport { nextTick, proxy } from \"./util\";\r\nexport function initState(vm) { // vm.$options\r\n    const opts = vm.$options;\r\n    if (opts.props) initProps(vm)\r\n    if (opts.methods) initMethods(vm)\r\n    if (opts.data) initData(vm)\r\n    if (opts.computed) initComputed(vm)\r\n    if (opts.watch) initWatch(vm)\r\n}\r\n\r\nfunction initProps(vm) {\r\n\r\n}\r\nfunction initMethods(vm) {\r\n    let methods = vm.$options.methods\r\n    vm._methods = methods\r\n    // 将vm._data.msg => vm.msg\r\n    for (let key in methods) {\r\n        proxy(vm, '_methods', key)\r\n    }\r\n    observe(methods)\r\n}\r\nfunction initData(vm) {\r\n    let data = vm.$options.data\r\n    vm._data = data = typeof data == 'function' ? data.call(vm) : data;\r\n    // 将vm._data.msg => vm.msg\r\n    for (let key in data) {\r\n        proxy(vm, '_data', key)\r\n    }\r\n    observe(data)\r\n}\r\nfunction initComputed(vm) {\r\n\r\n}\r\nfunction initWatch(vm) {\r\n    let watch = vm.$options.watch\r\n    for (const key in watch) {\r\n        const handler = watch[key]\r\n        if (Array.isArray(handler)) {\r\n            // handler是数组\r\n            handler.forEach((handle) => {\r\n                createWatcher(vm, key, handle)\r\n            })\r\n        } else {\r\n            // handler是字符串 对象 函数\r\n            createWatcher(vm, key, handler)\r\n        }\r\n    }\r\n}\r\nfunction createWatcher(vm, exprOrFn, handler, options = {}) {\r\n    // options 表示用户调用$watcher\r\n    if (typeof handler === 'object') {\r\n        // 'a':{\r\n        //     handler(){\r\n\r\n        //     },\r\n        //     async:true\r\n        // }\r\n        options = handler\r\n        handler = handler.handler\r\n    }\r\n    if (typeof handler === 'string') {\r\n        // watch:{\r\n        //     'a':'getList'\r\n        // },\r\n        // methods: {\r\n        //     getList(){\r\n        //         console.log('getList');\r\n        //     }\r\n        // },\r\n        handler = vm[handler]\r\n    }\r\n    // key handler options配置\r\n    return vm.$watch(exprOrFn,handler,options)\r\n}\r\n\r\nexport function stateMixin(Vue) {\r\n    Vue.prototype.$nextTick = function (cb) {\r\n        nextTick(cb)\r\n    }\r\n    Vue.prototype.$watch = function (exprOrFn,handler,options) {\r\n        console.log(exprOrFn,handler,options);\r\n        console.log(123);\r\n    }\r\n}","import { compileToFunctions } from \"./compiler/index\"\r\nimport { callHook, mountComponent } from \"./lifecycle\"\r\nimport { initState } from \"./state\"\r\nimport { mergeOptions } from \"./util\"\r\n// 在这扩展初始化方法\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        let vm = this\r\n        // vm.constructor.options == Vue.options || 子组件的options\r\n        // 合并options到当前组件上\r\n        vm.$options = mergeOptions(vm.constructor.options,options)\r\n        // 将用户自定义的options与全局Vue.options合并\r\n        callHook(vm,'beforeCreate');\r\n        initState(vm)\r\n        callHook(vm,'created');\r\n        if(vm.$options.el){\r\n            vm.$mount(vm.$options.el)\r\n        }\r\n    }\r\n    // 挂载操作 render template el\r\n    Vue.prototype.$mount = function (el) {\r\n        const vm = this\r\n        const options = vm.$options\r\n        el = document.querySelector(el)\r\n        vm.$el = el\r\n        if(!options.render){\r\n            let template = options.template\r\n            if(!template && el){\r\n                template = el.outerHTML;\r\n            }\r\n            const render = compileToFunctions(template);\r\n            options.render = render\r\n        }\r\n        mountComponent(vm,el)\r\n    }\r\n}","export function  renderMixin(Vue) {\r\n    // 创建元素\r\n    Vue.prototype._c = function () {\r\n       return createElement(...arguments) \r\n    }\r\n    // stringify\r\n    Vue.prototype._s = function (value) {\r\n        return value == null ? '' : (typeof value == 'object') ? JSON.stringify(value) : value\r\n    }\r\n    // 文本元素\r\n    Vue.prototype._v = function (text) {\r\n        return createTextVnode(text)\r\n    }\r\n    // 调用render\r\n    Vue.prototype._render = function () {\r\n        const vm  = this\r\n        let render = vm.$options.render\r\n        let vnode = render.call(vm)\r\n        return vnode\r\n    }\r\n}\r\nfunction createElement(tag,data={},...children) {\r\n    return vnode(tag,data,data.key,children)\r\n}\r\nfunction createTextVnode(text) {\r\n    return vnode(undefined,undefined,undefined,undefined,text)\r\n}\r\n// 描述虚拟dom\r\nfunction vnode(tag,data,key,children,text) {\r\n    return {\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text,\r\n        // componentsInstance:'',\r\n    }\r\n}","import { initGlobalApi } from \"./global-api/index\";\r\nimport { initMixin } from \"./init\";\r\nimport { lifecycleMixin } from \"./lifecycle\";\r\nimport { stateMixin } from \"./state\";\r\nimport { renderMixin } from \"./vdom/index\";\r\n// 在这扩展原型\r\nfunction Vue(options) {\r\n    this._init(options); // 初始化操作\r\n}\r\n\r\n// 原型方法\r\n\r\ninitMixin(Vue); // init\r\nlifecycleMixin(Vue); // _update\r\nrenderMixin(Vue); // _render\r\nstateMixin(Vue); // 更新状态  nextTick\r\n// 静态方法\r\ninitGlobalApi(Vue);\r\n\r\n\r\nexport default Vue"],"names":["proxy","vm","data","key","Object","defineProperty","get","set","newValue","def","obj","val","enumerable","value","writable","configurable","LIFECYCLE_HOOKS","strats","parentValue","childValue","computed","watch","mergeHook","concat","forEach","hook","mergeOptions","parent","child","mergeField","options","hasOwnProperty","callbacks","pending","flushCallbacks","length","cb","shift","timerFunc","Promise","resolve","then","MutationObserver","observe","textNode","document","createTextNode","characterData","textContent","setImmediate","setTimeout","nextTick","push","initGlobalApi","Vue","mixin","defaultTagRE","genProps","attrs","str","i","attr","name","split","item","trim","JSON","stringify","slice","gen","node","type","generate","text","test","tokens","match","index","lastIndex","exec","join","genChildren","ast","children","map","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","tagName","start","element","root","currentParent","stack","end","pop","chars","parseStartTag","advance","n","substring","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunctions","template","render","Function","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","queue","has","Watcher","exprOrFn","isWatcher","deps","depsId","Set","getter","queueWatcher","dep","add","addSub","flushSchedulerQueue","run","callHook","patch","oldVnode","newVnode","el","createElm","parentElm","parentNode","insertBefore","nextSibling","removeChild","vnode","createElement","updateProperties","appendChild","newProps","styleName","style","className","setAttribute","lifecycleMixin","prototype","_update","$el","mountComponent","updateComponent","_render","handlers","$options","Array","isArray","call","arrayProto","arrayMethods","create","methodsToPatch","method","args","res","apply","ob","__ob__","inserted","observeArray","notify","Observer","__proto__","walk","keys","defineReactive","arguments","childOb","depend","console","log","dependArray","hasOwn","e","l","initState","opts","props","initProps","methods","initMethods","initData","initComputed","initWatch","_methods","_data","handler","handle","createWatcher","$watch","stateMixin","$nextTick","initMixin","_init","constructor","$mount","querySelector","outerHTML","renderMixin","_c","_s","_v","createTextVnode","undefined"],"mappings":"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"}